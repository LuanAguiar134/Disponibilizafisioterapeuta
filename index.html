<!-- A PARTIR DO HEAD -->
...
<style>
  ...
  .avaliacao-container {
    margin-top: 20px;
  }
  .estrelas input[type="radio"] {
    display: none;
  }
  .estrelas label {
    color: #ccc;
    font-size: 24px;
    padding: 0 5px;
    cursor: pointer;
  }
  .estrelas input[type="radio"]:checked ~ label {
    color: gold;
  }
</style>
</head>
<body>
...
<!-- MANTÉM TODA A ESTRUTURA ATÉ O DASHBOARD -->
<div id="dashboard" class="dashboard-container hidden">
  <h2>Bem-vindo(a), <span id="nomeUsuario"></span></h2>
  <p><strong>Tipo:</strong> <span id="tipoUsuarioDash"></span></p>
  <p id="infoExtraDash"></p>
  <div id="conteudoDinamico"></div>
  <div class="avaliacao-container hidden" id="avaliacaoContainer">
    <h3>Avaliar Fisioterapeuta</h3>
    <div class="estrelas">
      <input type="radio" name="estrela" id="estrela5" value="5"><label for="estrela5">★</label>
      <input type="radio" name="estrela" id="estrela4" value="4"><label for="estrela4">★</label>
      <input type="radio" name="estrela" id="estrela3" value="3"><label for="estrela3">★</label>
      <input type="radio" name="estrela" id="estrela2" value="2"><label for="estrela2">★</label>
      <input type="radio" name="estrela" id="estrela1" value="1"><label for="estrela1">★</label>
    </div>
    <textarea id="comentarioAvaliacao" rows="3" style="width:100%;" placeholder="Deixe um comentário..."></textarea>
    <button onclick="enviarAvaliacao()">Enviar Avaliação</button>
  </div>
  <button onclick="logout()">Sair</button>
</div>

<script>
  const formCadastro = document.getElementById("formCadastro");
  const tipoUsuario = document.getElementById("tipoUsuario");
  const enderecoGroup = document.getElementById("enderecoGroup");
  const especializacaoGroup = document.getElementById("especializacaoGroup");
  const areaPacienteGroup = document.getElementById("areaPacienteGroup");
  const conteudoDinamico = document.getElementById("conteudoDinamico");

  tipoUsuario.addEventListener("change", () => {
    const tipo = tipoUsuario.value;
    enderecoGroup.classList.toggle("hidden", tipo !== "fisio");
    especializacaoGroup.classList.toggle("hidden", tipo !== "fisio");
    areaPacienteGroup.classList.toggle("hidden", tipo !== "paciente");
  });

  formCadastro.addEventListener("submit", (e) => {
    e.preventDefault();

    const nome = document.getElementById("nome").value;
    const telefone = document.getElementById("telefone").value;
    const endereco = document.getElementById("endereco").value;
    const especializacao = document.getElementById("especializacaoFisio").value;
    const areaPaciente = document.getElementById("areaPaciente").value;
    const email = document.getElementById("email").value;
    const senha = document.getElementById("senha").value;
    const confirmSenha = document.getElementById("confirmSenha").value;
    const tipo = tipoUsuario.value;

    if (senha !== confirmSenha) {
      alert("Senhas não conferem.");
      return;
    }

    const usuario = {
      nome,
      telefone,
      email,
      senha,
      tipo,
      endereco: tipo === "fisio" ? endereco : "",
      especializacao: tipo === "fisio" ? especializacao : "",
      areaDesejada: tipo === "paciente" ? areaPaciente : ""
    };

    // Simula base de usuários salvos
    const usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
    usuarios.push(usuario);
    localStorage.setItem("usuarios", JSON.stringify(usuarios));
    localStorage.setItem("usuarioLogado", JSON.stringify(usuario));
    mostrarDashboard(usuario);
  });

  function mostrarDashboard(usuario) {
    document.getElementById("cadastro").classList.add("hidden");
    document.getElementById("dashboard").classList.remove("hidden");

    document.getElementById("nomeUsuario").textContent = usuario.nome;
    document.getElementById("tipoUsuarioDash").textContent = usuario.tipo === "fisio" ? "Fisioterapeuta" : "Paciente";

    if (usuario.tipo === "fisio") {
      document.getElementById("infoExtraDash").innerHTML = `<strong>Especialização:</strong> ${usuario.especializacao || 'Não informado'}<br><strong>Endereço:</strong> ${usuario.endereco || 'Não informado'}`;
      listarSolicitacoes(usuario);
    } else {
      document.getElementById("infoExtraDash").innerHTML = `<strong>Área desejada:</strong> ${usuario.areaDesejada || 'Não informada'}`;
      listarFisioterapeutas(usuario.areaDesejada);
      document.getElementById("avaliacaoContainer").classList.remove("hidden");
    }
  }

  function listarFisioterapeutas(area) {
    const usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
    const fisioterapeutas = usuarios.filter(u => u.tipo === "fisio" && u.especializacao === area);

    let html = `<h3>Fisioterapeutas disponíveis para área: ${area}</h3>`;
    if (fisioterapeutas.length === 0) {
      html += "<p>Nenhum fisioterapeuta encontrado nesta área.</p>";
    } else {
      fisioterapeutas.forEach(f => {
        html += `<p><strong>${f.nome}</strong><br>Especialização: ${f.especializacao}<br>Endereço: ${f.endereco}</p>`;
      });
    }
    conteudoDinamico.innerHTML = html;
  }

  function listarSolicitacoes(fisio) {
    const usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
    const solicitantes = usuarios.filter(u => u.tipo === "paciente" && u.areaDesejada === fisio.especializacao);

    let html = "<h3>Pacientes que solicitaram atendimento nesta especialização:</h3>";
    if (solicitantes.length === 0) {
      html += "<p>Nenhum paciente solicitou atendimento ainda.</p>";
    } else {
      solicitantes.forEach(p => {
        html += `<p><strong>${p.nome}</strong><br>Telefone: ${p.telefone}</p>`;
      });
    }
    conteudoDinamico.innerHTML = html;
  }

  function enviarAvaliacao() {
    const estrelaSelecionada = document.querySelector('input[name="estrela"]:checked');
    const comentario = document.getElementById("comentarioAvaliacao").value;

    if (!estrelaSelecionada) {
      alert("Selecione uma quantidade de estrelas.");
      return;
    }

    alert(`Avaliação enviada com ${estrelaSelecionada.value} estrela(s).\nComentário: ${comentario}`);
    // Aqui pode-se salvar a avaliação em localStorage ou enviar para backend se desejar
  }

  function logout() {
    localStorage.removeItem("usuarioLogado");
    location.reload();
  }

  // Carregar dashboard direto se usuário estiver logado
  window.onload = () => {
    const usuarioLogado = JSON.parse(localStorage.getItem("usuarioLogado"));
    if (usuarioLogado) {
      mostrarDashboard(usuarioLogado);
    }
  };
</script>
